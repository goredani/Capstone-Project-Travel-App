<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>CSECS!</h1>

    <input type="text" name="city" id="city" placeholder="city"/>
    <input type="text" name="country" id="country" placeholder="country"/>
    <button onclick="formHandler()">Send Form Data</button>

    <hr>

    <button type="submit" onclick="postData()" value="postData">Post Data</button>
    <button type="submit" onclick="getData()" value="getData">Get Data</button>
    <div id="results"></div>

    <script>
        const results = document.getElementById("results");

        const getData = () => {
            fetch("http://localhost:8000/getData").then(res => {
                return res.json();
            }).then(data => {
                results.innerHTML = JSON.stringify(data);
            });
        }

        const postData = (url = 'http://localhost:8000/postData', data = {}) => {
            fetch(url, {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).finally(data => console.log());
        }

        const formHandler = () => {
            const cityName = document.getElementById('city').value;
            const countryName = document.getElementById('country').value;
            postData('http://localhost:8000/postData', {city: cityName, country: countryName});
            console.log(postData());
        }
    </script>
</body>

</html>